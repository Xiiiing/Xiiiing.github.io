const commonChartOptions={tooltip:{trigger:'item',formatter:'{b}'},series:[{type:'map',roam:false,selectedMode:'single',label:{show:true,color:'#333',fontSize:12},itemStyle:{normal:{areaColor:'#f0f2f5',borderColor:'#fff',borderWidth:0.5},emphasis:{areaColor:'#91caff',label:{show:true}},selected:{areaColor:'#1890ff'}}}]};function initEchartsMap({selector,mapName,jsonPath,seriesName,data,onClick}){document.addEventListener('DOMContentLoaded',()=>{const chartDom=document.querySelector(selector);if(!chartDom)return;const chart=echarts.init(chartDom);fetch(jsonPath).then(res=>res.json()).then(geoJson=>{echarts.registerMap(mapName,geoJson);const option={...commonChartOptions,series:[{...commonChartOptions.series[0],name:seriesName,map:mapName,data:data||[]}]};chart.setOption(option);if(onClick){chart.on('click',params=>{if(params.componentType==='series'&&params.seriesType==='map'){onClick(params.name);}});}}).catch(err=>console.error(`${seriesName}地图加载失败:`,err));});}
initEchartsMap({selector:'[data-echarts-map="china"]',mapName:'china',jsonPath:'/_javascripts/china.json',seriesName:'中国地图',data:[{name:'辽宁',itemStyle:{normal:{areaColor:'#1890ff'}}},{name:'四川',itemStyle:{normal:{areaColor:'#1890ff'}}},{name:'广东',itemStyle:{normal:{areaColor:'#1890ff'}}}],onClick:provinceName=>{const provincePaths={'辽宁':'/liaoning','四川':'/sichuan','广东':'/guangdong'};const path=provincePaths[provinceName];if(path){window.location.href=path;}else{alert(`暂未开放${provinceName}地图页面`);}}});initEchartsMap({selector:'[data-echarts-map="sichuan"]',mapName:'sichuan',jsonPath:'/_javascripts/51.json',seriesName:'四川地图'});initEchartsMap({selector:'[data-echarts-map="guangdong"]',mapName:'guangdong',jsonPath:'/_javascripts/44.json',seriesName:'广东地图'});initEchartsMap({selector:'[data-echarts-map="liaoning"]',mapName:'liaoning',jsonPath:'/_javascripts/21.json',seriesName:'辽宁地图'});